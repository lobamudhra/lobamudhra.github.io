(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[394],{5464:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/courses/spring-security/lessons/json-web-token",function(){return c(4928)}])},2018:function(d,b,a){"use strict";var e=a(5893),c=a(5927),f=a.n(c);b.Z=function(a){var c=a.href,d=a.children,b=a.target;return(0,e.jsxs)("a",{href:c,target:void 0===b?"":b,className:"text-decoration-none","data-bs-toggle":"tooltip","data-bs-title":"Read article",children:[(0,e.jsx)("i",{className:"bi bi-file-text ".concat(f().linkIcon)}),(0,e.jsx)("span",{className:f().linkText,children:d})]})}},476:function(d,b,a){"use strict";var e=a(7568),c=a(4051),f=a.n(c),g=a(5893),h=a(637),i=a(7294),j=a(1896);b.Z=function(a){var l,b=a.fileName,m=a.href,c=a.language,d=void 0===c?"java":c,n=a.children,k=(0,i.useState)(!1),o=k[0],q=k[1],p=(l=(0,e.Z)(f().mark(function a(){return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,navigator.clipboard.writeText(n);case 2:q(!0),setTimeout(function(){return q(!1)},6e3);case 4:case"end":return a.stop()}},a)})),function(){return l.apply(this,arguments)});return(0,g.jsxs)("div",{className:"border rounded fs-6 my-4",children:[b&&(0,g.jsxs)("div",{className:"p-3 bg-light border-bottom",children:[(0,g.jsx)("span",{className:"font-monospace",children:(0,g.jsx)("a",{href:m,target:"_blank",children:b})}),(0,g.jsx)("span",{className:"float-end cursor-pointer","data-bs-toggle":"tooltip","data-bs-title":"Copy code",onClick:p,children:(0,g.jsx)("i",{className:"bi-clipboard"})})]}),(0,g.jsx)("pre",{className:"m-0 px-3 pb-3",children:(0,g.jsx)("code",{className:"language-".concat(d),children:(0,g.jsx)("span",{dangerouslySetInnerHTML:{__html:h.Z.highlight(n,{language:d}).value}})})}),o&&(0,g.jsx)(j.Z,{children:"Code copied to clipboard"})]})}},9963:function(d,b,a){"use strict";a.d(b,{aC:function(){return h},k8:function(){return i},nL:function(){return g}});var e=a(5893),c=a(4046),f=a.n(c);function g(a){var b=a.children;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("h1",{className:"display-5 mt-2 mb-2",children:b}),(0,e.jsx)("p",{className:f().underline})]})}function h(a){var b=a.children;return(0,e.jsx)("h3",{className:"fw-light mt-5 mb-2",children:b})}function i(a){var b=a.children;return(0,e.jsx)("h4",{className:"fw-light mt-5 mb-2",children:b})}},4621:function(c,a,b){"use strict";var d=b(5893);a.Z=function(a){var c=a.src,b=a.title;return(0,d.jsxs)("div",{className:"p-3",children:[(0,d.jsx)("div",{className:"mb-3 text-secondary text-center",children:(0,d.jsx)("em",{children:b})}),(0,d.jsx)("img",{className:"img-fluid rounded border shadow",src:c,alt:b})]})}},7291:function(d,b,a){"use strict";var e=a(5893),c=a(9472),f=a.n(c);b.Z=function(a){var b=a.children;return(0,e.jsx)("mark",{className:"font-monospace border rounded p-1 ".concat(f().mark),children:b})}},4928:function(f,b,a){"use strict";a.r(b);var g=a(5893),h=a(9963),i=a(130),j=a(7291),k=a(476);a(4621);var c=a(3274),d=a(9927),e=a(358),l=a(2116),m=a(2018);b.default=(0,c.default)(function(a){var b=a.githubPath;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("section",{children:[(0,g.jsx)(h.nL,{children:"JSON Web Token (JWT)"}),(0,g.jsx)(i.Z,{children:"Imagine you are going to your office located in a multi-storey building, hosting it's space for multiple companies like yours. You will be required to display your ID card to identify who you are inside the building premise. You will also be required to carry your ACCESS card to let you inside your office space. Similarly a self-contained token to identify who you are and what are you allowed to do will be better than opaque tokens."}),(0,g.jsx)(i.Z,{children:"JSON Web Token carries these two details along with the few other key informations. And it also addresses almost all the challenges we raised with opaque tokens in the previous chapter."})]}),(0,g.jsxs)("section",{children:[(0,g.jsx)(h.aC,{children:"What is JSON Web Token (JWT)?"}),(0,g.jsx)(i.Z,{children:"JSON Web Token is an open standard that defines a compact and self-contained way for securely transmitting information between parties as a JSON object. This information can be verified and trusted because it is digitally signed."}),(0,g.jsx)(i.Z,{children:"As the official definition suggests JWT can be used to securely transmit any information, we can use it to carry the authentication and authorization details of the user or the Subject. Remember JWT is not an authentication mechanism, it is just a token specification which can be used as a means to perform Token-based authentication as well as Token-based authorization."}),(0,g.jsxs)(i.Z,{children:["A quick read on What, When, Why and How about ",(0,g.jsx)(m.Z,{href:"https://jwt.io/introduction",target:"_blank",children:"JSON Web Token"})," can be helpful before start using it in our course. As the official page presents the necessary details about JWT in a concise manner, I do not want to replicate the same content here in different words."]})]}),(0,g.jsxs)("section",{children:[(0,g.jsx)(h.aC,{children:"How do we use JWT?"}),(0,g.jsxs)(i.Z,{children:["We do not have to reinvent the wheel in order to generate and validate the JWTs by ourselves. As we mentioned earlier, we will use battle-tested production grade open source libraries. The official page of JWT also lists some of the ",(0,g.jsx)(m.Z,{href:"https://jwt.io/libraries?language=Java",target:"_blank",children:"libraries"})," we can use. We will use ",(0,g.jsx)(m.Z,{href:"https://github.com/jwtk/jjwt",target:"_blank",children:"JJWT"})," library in our course to generate and validate JWTs."]}),(0,g.jsx)(i.Z,{children:"Let's add below JJWT dependencies in our pom.xml, and the latest version as I write this is 0.11.5."}),(0,g.jsx)(k.Z,{fileName:"pom.xml",href:(0,l.gxs)("json-web-token","generate-jwt",b)+"/pom.xml",language:"xml",children:"\n<dependency>\n    <groupId>io.jsonwebtoken</groupId>\n    <artifactId>jjwt-api</artifactId>\n    <version>0.11.5</version>\n</dependency>\n<dependency>\n    <groupId>io.jsonwebtoken</groupId>\n    <artifactId>jjwt-impl</artifactId>\n    <version>0.11.5</version>\n</dependency>\n<dependency>\n    <groupId>io.jsonwebtoken</groupId>\n    <artifactId>jjwt-jackson</artifactId>\n    <version>0.11.5</version>\n</dependency>\n"}),(0,g.jsx)(i.Z,{children:"JJWT library provides a Builder pattern with convenient setter methods for standard registered Claim names defined in the JWT specification. They are:"}),(0,g.jsxs)("table",{className:"table table-striped",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"Setter"}),(0,g.jsx)("th",{children:"Claim Name"}),(0,g.jsx)("th",{children:"Purpose"})]})}),(0,g.jsxs)("tbody",{children:[(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"setSubject"}),(0,g.jsx)("td",{children:"sub"}),(0,g.jsx)("td",{children:"Principal to whom the token issued to"})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"setExpiration"}),(0,g.jsx)("td",{children:"exp"}),(0,g.jsx)("td",{children:"Time on or after which token is invalid"})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"setIssuedAt"}),(0,g.jsx)("td",{children:"iat"}),(0,g.jsx)("td",{children:"Time on which token was issued"})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"setId"}),(0,g.jsx)("td",{children:"jti"}),(0,g.jsx)("td",{children:"Unique identifier for the token"})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"setIssuer"}),(0,g.jsx)("td",{children:"iss"}),(0,g.jsx)("td",{children:"Principal who issued the token"})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"setAudience"}),(0,g.jsx)("td",{children:"aud"}),(0,g.jsx)("td",{children:"Recipients to whom the token is intended for"})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"setNotBefore"}),(0,g.jsx)("td",{children:"nbf"}),(0,g.jsx)("td",{children:"Time on or before which token is invalid"})]})]})]}),(0,g.jsxs)(i.Z,{children:["None of the above claim names are mandatory to use, it provides a starting point for a set of useful, interoperable claims. Custom claims that doesn't match the above setter can be set using ",(0,g.jsx)(j.Z,{children:"addClaims()"}),". As mentioned earlier, in order to use JWT as token-based authorization we will add the list of authorities as custom claims. This will reduce the need to query the database to load the ",(0,g.jsx)(j.Z,{children:"UserDetails"})," on every request in ",(0,g.jsx)(j.Z,{children:"TokenVerificationFilter"}),"."]}),(0,g.jsx)(i.Z,{children:"Let's see how to generate JSON Web Token in the next chapter."})]})]})},(0,e.s)(d.Z,"json-web-token"),!1)},5927:function(a){a.exports={linkIcon:"ArticleLink_linkIcon__cf7b_",linkText:"ArticleLink_linkText__b7K5H"}},4046:function(a){a.exports={heading:"Heading_heading__aP_DN",underline:"Heading_underline__sSwtx"}},9472:function(a){a.exports={mark:"Mark_mark__8gh_T"}}},function(a){a.O(0,[734,428,637,274,774,888,179],function(){var b;return a(a.s=5464)}),_N_E=a.O()}])