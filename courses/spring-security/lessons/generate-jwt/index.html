<!DOCTYPE html><html><head><title>Generate JWT :: Learn Spring Security :: FacadeCode</title><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/9f8c21078d4d48f3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9f8c21078d4d48f3.css" data-n-g=""/><link rel="preload" href="/_next/static/css/6b602475a8fa2514.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6b602475a8fa2514.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-a772cb4e65071da0.js" defer=""></script><script src="/_next/static/chunks/framework-ae4f43955bfa5ddc.js" defer=""></script><script src="/_next/static/chunks/main-9a134ca9f5cd7bc1.js" defer=""></script><script src="/_next/static/chunks/pages/_app-01fa0429c3abcfce.js" defer=""></script><script src="/_next/static/chunks/734-501744163e7117ce.js" defer=""></script><script src="/_next/static/chunks/428-3b4801b92e87da41.js" defer=""></script><script src="/_next/static/chunks/637-485e8fd7a429178a.js" defer=""></script><script src="/_next/static/chunks/274-faa7dc9d051cc985.js" defer=""></script><script src="/_next/static/chunks/pages/courses/spring-security/lessons/generate-jwt-a840c66464442f56.js" defer=""></script><script src="/_next/static/PgbzhTeNtmRax34kBMCQo/_buildManifest.js" defer=""></script><script src="/_next/static/PgbzhTeNtmRax34kBMCQo/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><header class="header_header___GOuZ sticky-top"><div class="container"><div class="logo_logo__RXjG7 cursor-pointer text-white py-2"><div class="hstack"><div class="logo_acronym__FiNtE">FC</div><div class="vr"></div><div><div>FACADE</div><div>CODE</div></div></div></div></div></header><main class="my-3"><div class="container"><section class="header_lessonHeader__jhqot"><div class="float-start">Lesson <!-- -->27<!-- --> of <!-- -->28</div><div class="float-end"><a href="javascript:void(0)" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">Learn Spring Security</a></div></section><div class="clearfix"></div><section><div class="offcanvas offcanvas-end" data-bs-scroll="true" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel"><div class="offcanvas-header border-bottom p-0 px-3 header_active__mLmmf"><div class="logo_logo__RXjG7 cursor-pointer text-white py-2"><div class="hstack"><div class="logo_acronym__FiNtE">FC</div><div class="vr"></div><div><div>FACADE</div><div>CODE</div></div></div></div><button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" data-bs-target="#offcanvasRight" aria-label="Close"></button></div><div class="offcanvas-body p-0"><h1 class="fw-light text-center m-3">Learn Spring Security</h1><h3 class="fs-3 text-center text-muted m-3">Contents</h3><section><div class="list-group list-group-flush"><div class="list-group-item fs-5 text-bg-light border-bottom"><span style="color:cornflowerblue">01. Bootstrap The Application</span></div><div class="list-group list-group-flush"><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">1<!-- -->. <!-- -->Introduction</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">2<!-- -->. <!-- -->Install Spring Security</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">3<!-- -->. <!-- -->Enable Basic Auth</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">4<!-- -->. <!-- -->Authentication with AppUser</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">5<!-- -->. <!-- -->Password Encoder</span></div></div><div class="list-group-item fs-5 text-bg-light border-bottom"><span style="color:cornflowerblue">02. Web Layer Security - RBAC</span></div><div class="list-group list-group-flush"><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">6<!-- -->. <!-- -->Permit Public APIs</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">7<!-- -->. <!-- -->Role Based Authorization</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">8<!-- -->. <!-- -->Disable CSRF</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">9<!-- -->. <!-- -->Current Authenticated User</span></div></div><div class="list-group-item fs-5 text-bg-light border-bottom"><span style="color:cornflowerblue">03. Web Layer Security - PBAC</span></div><div class="list-group list-group-flush"><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">10<!-- -->. <!-- -->Permission Based Authorization</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">11<!-- -->. <!-- -->Define Permissions</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">12<!-- -->. <!-- -->Assign Permissions</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">13<!-- -->. <!-- -->Remove Role Based Access</span></div></div><div class="list-group-item fs-5 text-bg-light border-bottom"><span style="color:cornflowerblue">04. Service Layer Security</span></div><div class="list-group list-group-flush"><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">14<!-- -->. <!-- -->PreAuthorize</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">15<!-- -->. <!-- -->PostAuthorize</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">16<!-- -->. <!-- -->Authorize Using Spring Beans</span></div></div><div class="list-group-item fs-5 text-bg-light border-bottom"><span style="color:cornflowerblue">05. Domain Object Instance Security</span></div><div class="list-group list-group-flush"><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">17<!-- -->. <!-- -->Domain Object Instance Security</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">18<!-- -->. <!-- -->PermissionEvaluator Interface</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">19<!-- -->. <!-- -->PermissionEvaluator Strategy</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">20<!-- -->. <!-- -->DB Backed UserDetailsService</span></div></div><div class="list-group-item fs-5 text-bg-light border-bottom"><span style="color:cornflowerblue">06. Token Based Authentication</span></div><div class="list-group list-group-flush"><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">21<!-- -->. <!-- -->Basic Authentication Revisited</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">22<!-- -->. <!-- -->Generate Token</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">23<!-- -->. <!-- -->Persist Token</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">24<!-- -->. <!-- -->Verify Token</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">25<!-- -->. <!-- -->Invalidate Token</span></div></div><div class="list-group-item fs-5 text-bg-light border-bottom"><span style="color:cornflowerblue">07. Token Based Authentication and Authorization</span></div><div class="list-group list-group-flush"><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">26<!-- -->. <!-- -->JSON Web Token</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">27<!-- -->. <!-- -->Generate JWT</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">28<!-- -->. <!-- -->Verify JWT</span></div></div></div></section></div></div></section><div class="mt-5"><div class="float-end"><a href="/assets/patches/spring-security/generate-jwt.patch" target="_blank" class="icon-link" data-bs-toggle="tooltip" data-bs-title="Download patch"><i class="bi-download fs-5 mx-2 cursor-pointer"></i></a><a href="https://github.com/facade-code/spring-security-for-developers/tree/generate-jwt" target="_blank" class="icon-link" data-bs-toggle="tooltip" data-bs-title="Github repository"><i class="bi-github fs-5 mx-2 cursor-pointer"></i></a><a href="javascript:void(0)" class="icon-link" data-bs-toggle="tooltip" data-bs-title="Copy link"><i class="bi-link-45deg fs-5 mx-2 cursor-pointer"></i></a></div><div class="clearfix"></div></div><section><h1 class="display-5 mt-2 mb-2">Generate JWT</h1><p class="Heading_underline__sSwtx"></p><p class="Paragraph_paragraph__90U8D">Our first step is to replace the random UUID token generation with JWT. But before generating the JWT, we will add some useful configuration in the properties and get it via <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">@ConfigurationProperties</mark> class.</p><div class="border rounded fs-6 my-4"><div class="p-3 bg-light border-bottom"><span class="font-monospace"><a href="https://github.com/facade-code/spring-security-for-developers/blob/generate-jwt/src/main/resources/application.properties" target="_blank">application.properties</a></span><span class="float-end cursor-pointer" data-bs-toggle="tooltip" data-bs-title="Copy code"><i class="bi-clipboard"></i></span></div><pre class="m-0 px-3 pb-3"><code class="language-java"><span>
jwt.token.base64-encoded-secret-key=/EbiawupzOqD8MlXgzlRetQfLL5vbD65jE6Q2MJF/Gg=
jwt.token.expiry-in-seconds=<span class="hljs-number">600</span>
jwt.token.signing-algorithm=HS256
</span></code></pre></div><p class="Paragraph_paragraph__90U8D">These properties need no explanation except for the first one. JWT must be signed with a strong secret key based on the signing algorithm we choose, else the signing algorithm will throw Weak secret key error. JJWT provides a utility to generate this SecretKey for us. We can Base64 encode it to a string and store it in a secure place and not in properties as we do.</p></section><section><h3 class="fw-light mt-5 mb-2">Generate SecretKey using JJWT utility</h3><p class="Paragraph_paragraph__90U8D">I have included below test class in this chapter, and this can be used to generate Base64 encoded SecretKey, and it also assert the equality of the decoded SecretKey with the original one.</p><div class="border rounded fs-6 my-4"><div class="p-3 bg-light border-bottom"><span class="font-monospace"><a href="https://github.com/facade-code/spring-security-for-developers/blob/generate-jwt/src/test/java/com/facadecode/spring/security/SecretKeyGeneratorTest.java" target="_blank">SecretKeyGeneratorTest.java</a></span><span class="float-end cursor-pointer" data-bs-toggle="tooltip" data-bs-title="Copy code"><i class="bi-clipboard"></i></span></div><pre class="m-0 px-3 pb-3"><code class="language-java"><span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SecretKeyGeneratorTest</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">SignatureAlgorithm</span> <span class="hljs-variable">ALGORITHM</span> <span class="hljs-operator">=</span> SignatureAlgorithm.HS256;

  <span class="hljs-meta">@Test</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">generateBase64EncodedSecretKeyString</span><span class="hljs-params">()</span> {
      <span class="hljs-comment">// Generate and Base64 encode to string to store it in disk</span>
      <span class="hljs-type">SecretKey</span> <span class="hljs-variable">originalKey</span> <span class="hljs-operator">=</span> Keys.secretKeyFor(ALGORITHM);
      <span class="hljs-type">String</span> <span class="hljs-variable">base64EncodedKeyString</span> <span class="hljs-operator">=</span> Base64.getEncoder().encodeToString(originalKey.getEncoded());
      System.out.println(<span class="hljs-string">&quot;Base64 encoded secret key generated below, store it in a secure place&quot;</span>);
      System.out.println(base64EncodedKeyString);

      <span class="hljs-comment">// Base64 decode from string and regenerate SecretKey</span>
      <span class="hljs-type">byte</span>[] base64DecodedKeyBytes = Base64.getDecoder().decode(base64EncodedKeyString);
      <span class="hljs-type">SecretKey</span> <span class="hljs-variable">regeneratedKey</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SecretKeySpec</span>(base64DecodedKeyBytes, <span class="hljs-number">0</span>, base64DecodedKeyBytes.length, ALGORITHM.getJcaName());

      <span class="hljs-keyword">assert</span> originalKey.equals(regeneratedKey);
  }
}
</span></code></pre></div></section><section><h3 class="fw-light mt-5 mb-2">JWT configuration properties</h3><p class="Paragraph_paragraph__90U8D">Let&#x27;s create a <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">@ConfigurationProperties</mark> class with variables corresponding to each properties we defined earlier.</p><div class="border rounded fs-6 my-4"><div class="p-3 bg-light border-bottom"><span class="font-monospace"><a href="https://github.com/facade-code/spring-security-for-developers/blob/generate-jwt/src/main/java/com/facadecode/spring/security/config/JWTConfig.java" target="_blank">JWTConfig.java</a></span><span class="float-end cursor-pointer" data-bs-toggle="tooltip" data-bs-title="Copy code"><i class="bi-clipboard"></i></span></div><pre class="m-0 px-3 pb-3"><code class="language-java"><span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@ConfigurationProperties(prefix = &quot;jwt.token&quot;)</span>
<span class="hljs-meta">@Setter</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JWTConfig</span> {
    <span class="hljs-keyword">private</span> String base64EncodedSecretKey;

    <span class="hljs-keyword">private</span> Integer expiryInSeconds;

    <span class="hljs-keyword">private</span> String signingAlgorithm;
}
</span></code></pre></div><p class="Paragraph_paragraph__90U8D">Add a method to regenerate <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">SecretKey</mark> object from the Base64 encoded string in the properties similar to the above test class.</p><div class="border rounded fs-6 my-4"><div class="p-3 bg-light border-bottom"><span class="font-monospace"><a href="https://github.com/facade-code/spring-security-for-developers/blob/generate-jwt/src/main/java/com/facadecode/spring/security/config/JWTConfig.java" target="_blank">JWTConfig.java</a></span><span class="float-end cursor-pointer" data-bs-toggle="tooltip" data-bs-title="Copy code"><i class="bi-clipboard"></i></span></div><pre class="m-0 px-3 pb-3"><code class="language-java"><span>
<span class="hljs-keyword">public</span> SecretKey <span class="hljs-title function_">getSecretKey</span><span class="hljs-params">()</span> {
    <span class="hljs-type">byte</span>[] base64DecodedKeyBytes = Base64.getDecoder().decode(base64EncodedSecretKey);
    <span class="hljs-type">SecretKey</span> <span class="hljs-variable">secretKey</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SecretKeySpec</span>(base64DecodedKeyBytes, <span class="hljs-number">0</span>,
    base64DecodedKeyBytes.length, <span class="hljs-built_in">this</span>.getSignatureAlgorithm().getJcaName());
    <span class="hljs-keyword">return</span> secretKey;
}
</span></code></pre></div><p class="Paragraph_paragraph__90U8D">Add another method to get signing algorithm object of type <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">SignatureAlgorithm</mark> from the signing-algorithm properties.</p><div class="border rounded fs-6 my-4"><div class="p-3 bg-light border-bottom"><span class="font-monospace"><a href="https://github.com/facade-code/spring-security-for-developers/blob/generate-jwt/src/main/java/com/facadecode/spring/security/config/JWTConfig.java" target="_blank">JWTConfig.java</a></span><span class="float-end cursor-pointer" data-bs-toggle="tooltip" data-bs-title="Copy code"><i class="bi-clipboard"></i></span></div><pre class="m-0 px-3 pb-3"><code class="language-java"><span>
<span class="hljs-keyword">public</span> SignatureAlgorithm <span class="hljs-title function_">getSignatureAlgorithm</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> SignatureAlgorithm.valueOf(signingAlgorithm);
}
</span></code></pre></div><p class="Paragraph_paragraph__90U8D">Add couple more methods to get token issue time (current time) and expiry time (issue time + expiry-in-seconds). In our case we have configured the token expiry time to be 600 seconds from the issue time.</p><div class="border rounded fs-6 my-4"><div class="p-3 bg-light border-bottom"><span class="font-monospace"><a href="https://github.com/facade-code/spring-security-for-developers/blob/generate-jwt/src/main/java/com/facadecode/spring/security/config/JWTConfig.java" target="_blank">JWTConfig.java</a></span><span class="float-end cursor-pointer" data-bs-toggle="tooltip" data-bs-title="Copy code"><i class="bi-clipboard"></i></span></div><pre class="m-0 px-3 pb-3"><code class="language-java"><span>
<span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getIssueTime</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(System.currentTimeMillis());
}

<span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getExpiryTime</span><span class="hljs-params">(Date issueDate)</span> {
    <span class="hljs-type">Calendar</span> <span class="hljs-variable">calendar</span> <span class="hljs-operator">=</span> Calendar.getInstance();
    calendar.setTime(issueDate);
    calendar.add(Calendar.SECOND, expiryInSeconds);
    <span class="hljs-keyword">return</span> calendar.getTime();
}
</span></code></pre></div></section><section><h3 class="fw-light mt-5 mb-2">Generate JWT</h3><p class="Paragraph_paragraph__90U8D">Finally we will replace the random UUID token generation in <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">AuthenticationService</mark> with the below JWT generation using <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">JwtBuilder</mark> class provided by <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">Jwts</mark>.</p><div class="border rounded fs-6 my-4"><div class="p-3 bg-light border-bottom"><span class="font-monospace"><a href="https://github.com/facade-code/spring-security-for-developers/blob/generate-jwt/src/main/java/com/facadecode/spring/security/service/AuthenticationService.java" target="_blank">AuthenticationService.java</a></span><span class="float-end cursor-pointer" data-bs-toggle="tooltip" data-bs-title="Copy code"><i class="bi-clipboard"></i></span></div><pre class="m-0 px-3 pb-3"><code class="language-java"><span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateToken</span><span class="hljs-params">(String username, String password)</span> {
    <span class="hljs-type">Authentication</span> <span class="hljs-variable">authentication</span> <span class="hljs-operator">=</span> UsernamePasswordAuthenticationToken.unauthenticated(username, password);
    authentication = authenticationManager.authenticate(authentication);
    
    <span class="hljs-type">String</span> <span class="hljs-variable">accessToken</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (authentication.isAuthenticated()) {
        authenticationFacade.setAuthentication(authentication);
        
        <span class="hljs-comment">// Generate JWT</span>
        accessToken = Jwts.builder()
            .setSubject(authentication.getName())
            .setIssuedAt(jwtConfig.getIssueTime())
            .setExpiration(jwtConfig.getExpiryTime(jwtConfig.getIssueTime()))
            .setId(UUID.randomUUID().toString())
            .addClaims(
                Collections.singletonMap(<span class="hljs-string">&quot;authorities&quot;</span>, authentication.getAuthorities()
                        .stream()
                        .map(GrantedAuthority::getAuthority)
                        .collect(Collectors.toList())
                )
            )
            .signWith(jwtConfig.getSecretKey(), jwtConfig.getSignatureAlgorithm())
            .compact();
    }
    
    <span class="hljs-keyword">return</span> accessToken;
}
</span></code></pre></div><p class="Paragraph_paragraph__90U8D">Here we are setting the Subject as the name of the authenticated user, which tells us whom the token is issued to. We are setting the date &amp; time the token was issued and it&#x27;s expiry time. We are assigning a random UUID to uniquely identify the token in order to prevent token replay attacks in case the token is invalidate before it&#x27;s expiry time. We have added the list of authorities of the authenticated user as custom claims using <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">addClaim()</mark>. Finally we are signing the token using the <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">SecretKey</mark> and <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">SignatureAlgorithm</mark> from <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">JwtConfig</mark>.</p><section class="px-3 pt-1 my-5 Notes_notes__up3CK"><h4 class="mb-3"><i class="bi bi-info-circle me-2"></i>Note</h4><p class="Paragraph_paragraph__90U8D">We have changed the variable name from <em>token</em> to <em>accessToken</em> in both <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">AuthenticationService</mark> and <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">AuthenticationController</mark> as it is no more a simple opaque token. This new variable name better reflects its purpose that it now contains both authentication and authorization information necessary enough to access the resources in our application.</p></section></section><section><h3 class="fw-light mt-5 mb-2">Tidy up and Test</h3><p class="Paragraph_paragraph__90U8D">We are no more required to store the token and it&#x27;s expiry time in the <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">AppUser</mark> record in the database. JWT is now self-contained to identify who the user is and what are they allowed to do in a given timeframe. Let&#x27;s tidy up the code a little by removing the <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">updateToken()</mark> in <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">UserService</mark> and it&#x27;s pre-authorize condition from <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">SecurityConstants</mark>.</p><p class="Paragraph_paragraph__90U8D">Restart the application and send a POST request to <u>GenerateToken</u> API and see the JWT generated like below.</p><div class="p-3"><div class="mb-3 text-secondary text-center"><em>JWT generated for Admin user credentials on successful authentication</em></div><img class="img-fluid rounded border shadow" src="/assets/images/spring-security/lesson27-01.png" alt="JWT generated for Admin user credentials on successful authentication"/></div><p class="Paragraph_paragraph__90U8D">We can now go to <a href="https://jwt.io/" target="_blank" class="text-decoration-none" data-bs-toggle="tooltip" data-bs-title="Read article"><i class="bi bi-file-text ArticleLink_linkIcon__cf7b_"></i><span class="ArticleLink_linkText__b7K5H">JWT&#x27;s official page</span></a> to unpack the token and see what it contains. Before pasting the generated JWT, check the Checkbox having label <em>secret base64 encoded</em> in <em>Verify Signature</em> section, and replace the string <em>your-256-bit-secret</em> in the text box with the Base64 encoded <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">SecretKey</mark> string from the properties. Now paste the generated JWT on the left hand side to see the Header and Payload details of the token on the right hand side.</p><div class="p-3"><div class="mb-3 text-secondary text-center"><em>Signature verified and decoded JWT with the payload matching the Admin claims</em></div><img class="img-fluid rounded border shadow" src="/assets/images/spring-security/lesson27-01.png" alt="Signature verified and decoded JWT with the payload matching the Admin claims"/></div><p class="Paragraph_paragraph__90U8D">We can also use JJWT library to parse the content of JWT using <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">JwtParserBuilder</mark> from <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">Jwts</mark> class as we will see in the next chapter while verifying the JWT.</p></section><div class="mt-5"><section><div class="row border-top border-bottom py-2 mt-2"><div class="col-12 col-md-6 col-lg-6 text-center text-md-start"><div><div class="text-muted"><i class="bi-arrow-left-short mx-1 align-middle invisible d-none d-md-inline-block"></i>Previous</div><div><i class="bi-arrow-left-short mx-1 align-middle footer_icon__J1tGG"></i><a href="/courses/spring-security/lessons/json-web-token/">JSON Web Token</a></div></div></div><div class="col-12 col-md-6 col-lg-6 text-center text-md-end"><div><div class="text-muted">Next<i class="bi-arrow-right-short mx-1 align-middle invisible d-none d-md-inline-block"></i></div><div><a href="/courses/spring-security/lessons/verify-jwt/">Verify JWT</a><i class="bi-arrow-right-short mx-1 align-middle footer_icon__J1tGG"></i></div></div></div></div></section></div></div></main><footer class="footer_footer__0KXQq"><div class="mt-5 py-5 text-center fw-lighter text-light bg-secondary"><div class="container"><figure><blockquote class="blockquote">I’m not a great programmer; I’m just a good programmer with great habits</blockquote><figcaption class="blockquote-footer text-light">Kent Beck</figcaption></figure></div></div><div class="bg-dark"><div class="py-5"><div class="container"><div class="row"><div class="col-12 col-md-6 m-3 m-md-0"><div class="logo_logo__RXjG7 cursor-pointer text-white py-2"><div class="hstack"><div class="logo_acronym__FiNtE">FC</div><div class="vr"></div><div><div>FACADE</div><div>CODE</div></div></div></div><div class="logo_logoCaption__h__G1">Simple bite-sized lessons to learn complex concepts</div></div><div class="col-12 col-md-3 m-3 m-md-0"><a href="/aboutme" class="footer_home__36kMG"><strong>ABOUT ME</strong></a></div><div class="col-12 col-md-3 m-3 m-md-0"><strong>COURSES</strong><ul class="list-unstyled p-0"><li class="my-2"><a href="/courses/spring-security">Spring Security</a></li></ul></div></div></div></div><div class="text-center py-2 footer_copyright__mlBDD">Copyright © 2022 FacadeCode</div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/courses/spring-security/lessons/generate-jwt","query":{},"buildId":"PgbzhTeNtmRax34kBMCQo","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>