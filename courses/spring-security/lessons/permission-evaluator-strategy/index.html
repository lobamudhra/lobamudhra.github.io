<!DOCTYPE html><html><head><title>PermissionEvaluator Strategy :: Learn Spring Security :: FacadeCode</title><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/9f8c21078d4d48f3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9f8c21078d4d48f3.css" data-n-g=""/><link rel="preload" href="/_next/static/css/53c78ade3257b8e1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/53c78ade3257b8e1.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-a772cb4e65071da0.js" defer=""></script><script src="/_next/static/chunks/framework-ae4f43955bfa5ddc.js" defer=""></script><script src="/_next/static/chunks/main-9a134ca9f5cd7bc1.js" defer=""></script><script src="/_next/static/chunks/pages/_app-01fa0429c3abcfce.js" defer=""></script><script src="/_next/static/chunks/734-501744163e7117ce.js" defer=""></script><script src="/_next/static/chunks/428-3b4801b92e87da41.js" defer=""></script><script src="/_next/static/chunks/637-485e8fd7a429178a.js" defer=""></script><script src="/_next/static/chunks/274-faa7dc9d051cc985.js" defer=""></script><script src="/_next/static/chunks/pages/courses/spring-security/lessons/permission-evaluator-strategy-e43db2224ccc1430.js" defer=""></script><script src="/_next/static/PgbzhTeNtmRax34kBMCQo/_buildManifest.js" defer=""></script><script src="/_next/static/PgbzhTeNtmRax34kBMCQo/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><header class="header_header___GOuZ sticky-top"><div class="container"><div class="logo_logo__RXjG7 cursor-pointer text-white py-2"><div class="hstack"><div class="logo_acronym__FiNtE">FC</div><div class="vr"></div><div><div>FACADE</div><div>CODE</div></div></div></div></div></header><main class="my-3"><div class="container"><section class="header_lessonHeader__jhqot"><div class="float-start">Lesson <!-- -->19<!-- --> of <!-- -->28</div><div class="float-end"><a href="javascript:void(0)" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">Learn Spring Security</a></div></section><div class="clearfix"></div><section><div class="offcanvas offcanvas-end" data-bs-scroll="true" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel"><div class="offcanvas-header border-bottom p-0 px-3 header_active__mLmmf"><div class="logo_logo__RXjG7 cursor-pointer text-white py-2"><div class="hstack"><div class="logo_acronym__FiNtE">FC</div><div class="vr"></div><div><div>FACADE</div><div>CODE</div></div></div></div><button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" data-bs-target="#offcanvasRight" aria-label="Close"></button></div><div class="offcanvas-body p-0"><h1 class="fw-light text-center m-3">Learn Spring Security</h1><h3 class="fs-3 text-center text-muted m-3">Contents</h3><section><div class="list-group list-group-flush"><div class="list-group-item fs-5 text-bg-light border-bottom"><span style="color:cornflowerblue">01. Bootstrap The Application</span></div><div class="list-group list-group-flush"><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">1<!-- -->. <!-- -->Introduction</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">2<!-- -->. <!-- -->Install Spring Security</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">3<!-- -->. <!-- -->Enable Basic Auth</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">4<!-- -->. <!-- -->Authentication with AppUser</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">5<!-- -->. <!-- -->Password Encoder</span></div></div><div class="list-group-item fs-5 text-bg-light border-bottom"><span style="color:cornflowerblue">02. Web Layer Security - RBAC</span></div><div class="list-group list-group-flush"><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">6<!-- -->. <!-- -->Permit Public APIs</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">7<!-- -->. <!-- -->Role Based Authorization</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">8<!-- -->. <!-- -->Disable CSRF</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">9<!-- -->. <!-- -->Current Authenticated User</span></div></div><div class="list-group-item fs-5 text-bg-light border-bottom"><span style="color:cornflowerblue">03. Web Layer Security - PBAC</span></div><div class="list-group list-group-flush"><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">10<!-- -->. <!-- -->Permission Based Authorization</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">11<!-- -->. <!-- -->Define Permissions</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">12<!-- -->. <!-- -->Assign Permissions</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">13<!-- -->. <!-- -->Remove Role Based Access</span></div></div><div class="list-group-item fs-5 text-bg-light border-bottom"><span style="color:cornflowerblue">04. Service Layer Security</span></div><div class="list-group list-group-flush"><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">14<!-- -->. <!-- -->PreAuthorize</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">15<!-- -->. <!-- -->PostAuthorize</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">16<!-- -->. <!-- -->Authorize Using Spring Beans</span></div></div><div class="list-group-item fs-5 text-bg-light border-bottom"><span style="color:cornflowerblue">05. Domain Object Instance Security</span></div><div class="list-group list-group-flush"><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">17<!-- -->. <!-- -->Domain Object Instance Security</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">18<!-- -->. <!-- -->PermissionEvaluator Interface</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">19<!-- -->. <!-- -->PermissionEvaluator Strategy</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">20<!-- -->. <!-- -->DB Backed UserDetailsService</span></div></div><div class="list-group-item fs-5 text-bg-light border-bottom"><span style="color:cornflowerblue">06. Token Based Authentication</span></div><div class="list-group list-group-flush"><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">21<!-- -->. <!-- -->Basic Authentication Revisited</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">22<!-- -->. <!-- -->Generate Token</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">23<!-- -->. <!-- -->Persist Token</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">24<!-- -->. <!-- -->Verify Token</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">25<!-- -->. <!-- -->Invalidate Token</span></div></div><div class="list-group-item fs-5 text-bg-light border-bottom"><span style="color:cornflowerblue">07. Token Based Authentication and Authorization</span></div><div class="list-group list-group-flush"><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">26<!-- -->. <!-- -->JSON Web Token</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">27<!-- -->. <!-- -->Generate JWT</span></div><div class="list-group-item list-group-item-action cursor-pointer border-0 p-2 fs-6"><span class="px-4">28<!-- -->. <!-- -->Verify JWT</span></div></div></div></section></div></div></section><div class="mt-5"><div class="float-end"><a href="/assets/patches/spring-security/permission-evaluator-strategy.patch" target="_blank" class="icon-link" data-bs-toggle="tooltip" data-bs-title="Download patch"><i class="bi-download fs-5 mx-2 cursor-pointer"></i></a><a href="https://github.com/facade-code/spring-security-for-developers/tree/permission-evaluator-strategy" target="_blank" class="icon-link" data-bs-toggle="tooltip" data-bs-title="Github repository"><i class="bi-github fs-5 mx-2 cursor-pointer"></i></a><a href="javascript:void(0)" class="icon-link" data-bs-toggle="tooltip" data-bs-title="Copy link"><i class="bi-link-45deg fs-5 mx-2 cursor-pointer"></i></a></div><div class="clearfix"></div></div><section><h1 class="display-5 mt-2 mb-2">PermissionEvaluator Strategy</h1><p class="Heading_underline__sSwtx"></p><p class="Paragraph_paragraph__90U8D">As we can register only one <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluator</mark> implementation, let&#x27;s create a master implementation to delegate the authorization check to the appropriate <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluator</mark> based on the type of the <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">targetDomainObject</mark>. And we can register this master <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluator</mark> with <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">DefaultMethodSecurityExpressionHandler</mark>.</p><p class="Paragraph_paragraph__90U8D">The above idea aligns with the <strong>Strategy Pattern</strong> which allows us to define a family of algorithms or strategies and choose one  among them at run time. In our case the strategies are the various <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluator</mark> implementations for each domain class.</p></section><section><h3 class="fw-light mt-5 mb-2">Strategy Interface</h3><p class="Paragraph_paragraph__90U8D">Our first step is to identify all the strategies through a common interface. Let&#x27;s create a <strong>Strategy</strong> interface extending <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluator</mark> interface. And then we will update each strategies i.e., <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">CoursePermissionEvaluator</mark> and <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">AppUserPermissionEvaluator</mark> to implement the <strong>Strategy</strong> interface.</p><div class="border rounded fs-6 my-4"><div class="p-3 bg-light border-bottom"><span class="font-monospace"><a href="https://github.com/facade-code/spring-security-for-developers/blob/permission-evaluator-strategy/src/main/java/com/facadecode/spring/security/security/PermissionEvaluatorStrategy.java" target="_blank">PermissionEvaluatorStrategy.java</a></span><span class="float-end cursor-pointer" data-bs-toggle="tooltip" data-bs-title="Copy code"><i class="bi-clipboard"></i></span></div><pre class="m-0 px-3 pb-3"><code class="language-java"><span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PermissionEvaluatorStrategy</span>&lt;T&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">PermissionEvaluator</span> {
    &lt;T&gt; Class&lt;T&gt; <span class="hljs-title function_">getTargetType</span><span class="hljs-params">()</span>;
}
</span></code></pre></div><div class="border rounded fs-6 my-4"><div class="p-3 bg-light border-bottom"><span class="font-monospace"><a href="https://github.com/facade-code/spring-security-for-developers/blob/permission-evaluator-strategy/src/main/java/com/facadecode/spring/security/security/CoursePermissionEvaluator.java" target="_blank">CoursePermissionEvaluator.java</a></span><span class="float-end cursor-pointer" data-bs-toggle="tooltip" data-bs-title="Copy code"><i class="bi-clipboard"></i></span></div><pre class="m-0 px-3 pb-3"><code class="language-java"><span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CoursePermissionEvaluator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PermissionEvaluatorStrategy</span>&lt;Course&gt; {
    <span class="hljs-comment">// hasPermission() overloaded methods omitted for brevity</span>

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Class&lt;Course&gt; <span class="hljs-title function_">getTargetType</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Course.class;
    }
}
</span></code></pre></div><div class="border rounded fs-6 my-4"><div class="p-3 bg-light border-bottom"><span class="font-monospace"><a href="https://github.com/facade-code/spring-security-for-developers/blob/permission-evaluator-strategy/src/main/java/com/facadecode/spring/security/security/AppUserPermissionEvaluator.java" target="_blank">AppUserPermissionEvaluator.java</a></span><span class="float-end cursor-pointer" data-bs-toggle="tooltip" data-bs-title="Copy code"><i class="bi-clipboard"></i></span></div><pre class="m-0 px-3 pb-3"><code class="language-java"><span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppUserPermissionEvaluator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PermissionEvaluatorStrategy</span>&lt;AppUser&gt; {
    <span class="hljs-comment">// hasPermission() overloaded methods omitted for brevity</span>

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Class&lt;AppUser&gt; <span class="hljs-title function_">getTargetType</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> AppUser.class;
    }
}
</span></code></pre></div><p class="Paragraph_paragraph__90U8D">We created the <strong>Strategy</strong> interface with Generics where the parameterised type in each implementation class must represent the corresponding <em>Entity</em> class. It ensures each domain class to have its own <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluatorStrategy</mark> implementation. And for our convenience we have added <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">getTargetType()</mark> to return the Class Type of the domain class, in order to identify the right strategy based on the type of the <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">targetDomainObject</mark>.</p></section><section><h3 class="fw-light mt-5 mb-2">StrategyContext</h3><p class="Paragraph_paragraph__90U8D"><strong>Strategy Pattern</strong> suggests to let the <em>Client</em> choose one of the strategies and encapsulate it inside a <em>StrategyContext</em> class. The <em>Client</em> will then call the <em>StrategyContext</em> to delegate the execution to the encapsulated Strategy.</p><p class="Paragraph_paragraph__90U8D">In our case we will use the master <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluator</mark> to have the responsibilities of both <em>Client</em> and <em>StrategyContext</em>. Let&#x27;s create <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluatorStrategyContext</mark> class to encapsulate all the strategies, choose one among them at runtime and delegate the authorization check to the chosen strategy.</p><div class="border rounded fs-6 my-4"><div class="p-3 bg-light border-bottom"><span class="font-monospace"><a href="https://github.com/facade-code/spring-security-for-developers/blob/permission-evaluator-strategy/src/main/java/com/facadecode/spring/security/security/PermissionEvaluatorStrategyContext.java" target="_blank">PermissionEvaluatorStrategyContext.java</a></span><span class="float-end cursor-pointer" data-bs-toggle="tooltip" data-bs-title="Copy code"><i class="bi-clipboard"></i></span></div><pre class="m-0 px-3 pb-3"><code class="language-java"><span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PermissionEvaluatorStrategyContext</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PermissionEvaluator</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasPermission</span><span class="hljs-params">(Authentication authentication, Object targetDomainObject, Object permission)</span> {
        <span class="hljs-keyword">if</span> (targetDomainObject != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">String</span> <span class="hljs-variable">targetType</span> <span class="hljs-operator">=</span> targetDomainObject.getClass().getSimpleName();
            <span class="hljs-keyword">if</span> (hasAuthority(authentication, permission)) {
                <span class="hljs-type">PermissionEvaluator</span> <span class="hljs-variable">permissionEvaluatorDelegate</span> <span class="hljs-operator">=</span> getPermissionEvaluator(targetType);
                <span class="hljs-keyword">return</span> permissionEvaluatorDelegate.hasPermission(authentication, targetDomainObject, permission);
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasPermission</span><span class="hljs-params">(Authentication authentication, Serializable targetId, String targetType, Object permission)</span> {
        <span class="hljs-keyword">if</span> (targetId != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (hasAuthority(authentication, permission)) {
                <span class="hljs-type">PermissionEvaluator</span> <span class="hljs-variable">permissionEvaluatorDelegate</span> <span class="hljs-operator">=</span> getPermissionEvaluator(targetType);
                <span class="hljs-keyword">return</span> permissionEvaluatorDelegate.hasPermission(authentication, targetId, targetType, permission);
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
}
</span></code></pre></div><p class="Paragraph_paragraph__90U8D">Here we are trying to find the appropriate <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluator</mark> based on the type of the <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">targetDomainObject</mark> and delegate the corresponding <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">hasPermission()</mark> execution to it. In the first method we are finding it based on the fully qualified class name of the Entity retrieved from the <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">targetDomainObject</mark>. Whereas in the second method we are finding it based on the same fully qualified class name of the Entity from the <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">hasPermission()</mark> SpEL expression defined in <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">Authority</mark> constants.</p></section><section><h3 class="fw-light mt-5 mb-2">Find PermissionEvaluator Strategy</h3><p class="Paragraph_paragraph__90U8D">Now the master <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluator</mark> is capable of delegating the authorization check based on the fully qualified class name of the Entity. We will encapsulate all the strategies by simply autowiring a list variable of type <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluatorStrategy</mark> like below:</p><div class="border rounded fs-6 my-4"><div class="p-3 bg-light border-bottom"><span class="font-monospace"><a href="https://github.com/facade-code/spring-security-for-developers/blob/permission-evaluator-strategy/src/main/java/com/facadecode/spring/security/security/PermissionEvaluatorStrategyContext.java" target="_blank">PermissionEvaluatorStrategyContext.java</a></span><span class="float-end cursor-pointer" data-bs-toggle="tooltip" data-bs-title="Copy code"><i class="bi-clipboard"></i></span></div><pre class="m-0 px-3 pb-3"><code class="language-java"><span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PermissionEvaluatorStrategyContext</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PermissionEvaluator</span> {
    <span class="hljs-comment">// hasPermission() overloaded methods omitted for brevity</span>

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> List&lt;PermissionEvaluatorStrategy&gt; strategies;

    <span class="hljs-keyword">public</span> PermissionEvaluator <span class="hljs-title function_">getPermissionEvaluator</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-keyword">return</span> strategies.stream()
            .filter(strategy -&gt;
                strategy.getTargetType()
                    .getSimpleName()
                    .equalsIgnoreCase(name)
            )
            .findFirst()
            .orElseThrow(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(String.format(<span class="hljs-string">&quot;No permission evaluator found for the class %s&quot;</span>, name)));
    }
}
</span></code></pre></div><p class="Paragraph_paragraph__90U8D">We will use <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">getTargetType()</mark> method in each strategy to get the fully qualified name of the corresponding Entity. We will then use it to compare it against the argument to find the right strategy. Finally register <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluatorStrategyContext</mark> class with <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">DefaultMethodSecurityExpressionHandler</mark> in <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">SecurityConfig</mark> configuration.</p></section><section><h3 class="fw-light mt-5 mb-2">Benefits</h3><p class="Paragraph_paragraph__90U8D">By implementing Domain Object Instance Security using <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">hasPermission()</mark> SpEL expression and <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluator</mark> we have achieved more fine-grained access control on each domain object instances based on the attributes of the subject and the object. This is a simple and efficient solution to achieve attribute-based access control using Spring&#x27;s built-in SpEL capability.</p><p class="Paragraph_paragraph__90U8D"><mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluator</mark> implementations created for each domain class enable us to understand who are authorized to do what on them. It is easier to manage the permissions with <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluator</mark> as it owns the permission related to the corresponding domain class defined in the parameterized type.</p><p class="Paragraph_paragraph__90U8D">In a Microservice architecture each microservice owns only a minor subset of the larger Business domain. And the team who manages each microservice owns the resposibility to secure these domain object instances. Those who do not want to centralize and externalize the authorization policies can define and implement their own domain object permissions using <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluator</mark> for each Entity.</p></section><section><h3 class="fw-light mt-5 mb-2">What next?</h3><p class="Paragraph_paragraph__90U8D">So far we have covered various authorization techniques to secure different layers as mentioned below:</p><ol><li>Web request security using <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">HttpSecurity</mark> configuration</li><li>Service layer security using <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">Method Security Annotations</mark></li><li>Domain object instance security using <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">PermissionEvaluator</mark></li></ol><p class="Paragraph_paragraph__90U8D">By this we have covered three out of the four security concerns to be addressed for any enterprise applications as suggested by <a href="https://docs.spring.io/spring-security/reference/servlet/appendix/faq.html#appendix-faq-web-xml" target="_blank" class="text-decoration-none" data-bs-toggle="tooltip" data-bs-title="Read article"><i class="bi bi-file-text ArticleLink_linkIcon__cf7b_"></i><span class="ArticleLink_linkText__b7K5H">Spring Security</span></a>. One of the security concerns left to be covered is <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">Authentication</mark>. Of course we enabled Basic Authentication at the start of the course and using it until now to authenticate the user. But there are a wide range of options available to implement Authentication. We will discuss some of the widely used authentication mechanisms using Spring Security in the upcoming chapters.</p><p class="Paragraph_paragraph__90U8D">Before that let us replace <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">InMemoryUserDetailsManager</mark> with our own <mark class="font-monospace border rounded p-1 Mark_mark__8gh_T">UserDetailsService</mark> implementation in the next chapter.</p></section><div class="mt-5"><section><div class="row border-top border-bottom py-2 mt-2"><div class="col-12 col-md-6 col-lg-6 text-center text-md-start"><div><div class="text-muted"><i class="bi-arrow-left-short mx-1 align-middle invisible d-none d-md-inline-block"></i>Previous</div><div><i class="bi-arrow-left-short mx-1 align-middle footer_icon__J1tGG"></i><a href="/courses/spring-security/lessons/permission-evaluator-interface/">PermissionEvaluator Interface</a></div></div></div><div class="col-12 col-md-6 col-lg-6 text-center text-md-end"><div><div class="text-muted">Next<i class="bi-arrow-right-short mx-1 align-middle invisible d-none d-md-inline-block"></i></div><div><a href="/courses/spring-security/lessons/db-backed-userdetailsservice/">DB Backed UserDetailsService</a><i class="bi-arrow-right-short mx-1 align-middle footer_icon__J1tGG"></i></div></div></div></div></section></div></div></main><footer class="footer_footer__0KXQq"><div class="mt-5 py-5 text-center fw-lighter text-light bg-secondary"><div class="container"><figure><blockquote class="blockquote">I’m not a great programmer; I’m just a good programmer with great habits</blockquote><figcaption class="blockquote-footer text-light">Kent Beck</figcaption></figure></div></div><div class="bg-dark"><div class="py-5"><div class="container"><div class="row"><div class="col-12 col-md-6 m-3 m-md-0"><div class="logo_logo__RXjG7 cursor-pointer text-white py-2"><div class="hstack"><div class="logo_acronym__FiNtE">FC</div><div class="vr"></div><div><div>FACADE</div><div>CODE</div></div></div></div><div class="logo_logoCaption__h__G1">Simple bite-sized lessons to learn complex concepts</div></div><div class="col-12 col-md-3 m-3 m-md-0"><a href="/aboutme" class="footer_home__36kMG"><strong>ABOUT ME</strong></a></div><div class="col-12 col-md-3 m-3 m-md-0"><strong>COURSES</strong><ul class="list-unstyled p-0"><li class="my-2"><a href="/courses/spring-security">Spring Security</a></li></ul></div></div></div></div><div class="text-center py-2 footer_copyright__mlBDD">Copyright © 2022 FacadeCode</div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/courses/spring-security/lessons/permission-evaluator-strategy","query":{},"buildId":"PgbzhTeNtmRax34kBMCQo","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>